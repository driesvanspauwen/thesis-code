# -*- sh -*-
NAME="gmp"
VERSION="6.2.1"
RELEASE="1"

# ABI versions
CABI="10"
CXXABI="4"

SUMMARY="Library for arbitrary precision arithmetic"
DESCRIPTION="GMP is a free library for arbitrary precision arithmetic,
operating on signed integers, rational numbers, and floating point
numbers. There is no practical limit to the precision except the ones
implied by the available memory in the machine GMP runs on. GMP has a
rich set of functions, and the functions have a regular interface."
CATEGORY="Math Libs"

HOMEPAGE="http://www.gmplib.org/"
SRC_URI="
  https://gmplib.org/download/${PN}/${P}.tar.zst
  https://gmplib.org/download/${PN}/${P}.tar.zst.sig
"

# Definitions for pkg
PKG_NAMES="libgmp-doc libgmp-devel libgmp${CABI} libgmpxx${CXXABI}"

libgmp_doc_CONTENTS="usr/share/info usr/share/doc/${PN}"
libgmp_doc_SUMMARY="${SUMMARY} (documentation)"
libgmp_doc_DESCRIPTION="${DESCRIPTION}
(documentation)"

libgmp_devel_CONTENTS="usr/include/ usr/lib/"
libgmp_devel_SUMMARY="${SUMMARY} (development)"
libgmp_devel_DESCRIPTION="${DESCRIPTION}
(development)"

eval libgmp${CABI}_OBSOLETES='gmp'
eval libgmp${CABI}_CONTENTS='"usr/bin/cyggmp-${CABI}.dll"'
eval libgmp${CABI}_SUMMARY='"${SUMMARY} (C runtime)"'
eval libgmp${CABI}_DESCRIPTION='"${DESCRIPTION}
eval (C runtime)"'

eval libgmpxx${CXXABI}_CONTENTS='"usr/bin/cyggmpxx-${CXXABI}.dll"'
eval libgmpxx${CXXABI}_SUMMARY='"${SUMMARY} (C++ runtime)"'
eval libgmpxx${CXXABI}_DESCRIPTION='"${DESCRIPTION}
(C++ runtime)"'

# Definitions for build
CYGCONF_ARGS="--enable-fat --enable-cxx"
# get rid of those pesky declspec warnings
CFLAGS+=" -Wno-attributes"
CXXFLAGS+=" -Wno-attributes"

# produced by autoreconf
DIFF_EXCLUDES="config.in"

# Definitions for install
src_install() {
	cd ${B}
	cyginstall

	make html
	cd doc/${PN}.html
	docinto html
	dodoc *.html
}
